

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Store Connections &mdash; biobank_backend 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Server" href="server.html" />
    <link rel="prev" title="OAuth" href="coauth.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> biobank_backend
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="biobank.html">Biobank Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="coauth.html">OAuth</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Store Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-connection.connection">Connections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-connection.db_connection">Database Connections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">biobank_backend</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Store Connections</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/connection.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-connection">
<span id="data-store-connections"></span><h1>Data Store Connections<a class="headerlink" href="#module-connection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-connection.connection">
<span id="connections"></span><h2>Connections<a class="headerlink" href="#module-connection.connection" title="Permalink to this headline">¶</a></h2>
<p>The connection to the PostgreSQL, which also executes commands on behalf of applications.</p>
<dl class="class">
<dt id="connection.connection.Connection">
<em class="property">class </em><code class="descclassname">connection.connection.</code><code class="descname">Connection</code><a class="reference internal" href="_modules/connection/connection.html#Connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic connection class</p>
<dl class="attribute">
<dt id="connection.connection.Connection.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#connection.connection.Connection.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<div class="section" id="module-connection.db_connection">
<span id="database-connections"></span><h3>Database Connections<a class="headerlink" href="#module-connection.db_connection" title="Permalink to this headline">¶</a></h3>
<p>Database interfaces using the base connection class.</p>
<dl class="class">
<dt id="connection.db_connection.PostgreSQLConnection">
<em class="property">class </em><code class="descclassname">connection.db_connection.</code><code class="descname">PostgreSQLConnection</code><span class="sig-paren">(</span><em>database</em>, <em>host</em>, <em>username</em>, <em>password</em>, <em>cursor_factory=&lt;class 'psycopg2.extras.RealDictCursor'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>The connection to the PostgreSQL database.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_database</strong> (<em>str</em>) – The name of the database to which a connection will be established.</p></li>
<li><p><strong>_host</strong> (<em>str</em>) – The hostname where the database resides.</p></li>
<li><p><strong>_username</strong> (<em>str</em>) – The username used to connect to the database.</p></li>
<li><p><strong>_password</strong> (<em>str</em>) – The password used to connect to the database</p></li>
<li><p><strong>_cursor_factory</strong> – The type of cursors to create.
The RealDictCursor factory is the default one.
This factory returns associative arrays (<cite>dict</cite> instances) from queries.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>database</em>, <em>host</em>, <em>username</em>, <em>password</em>, <em>cursor_factory=&lt;class 'psycopg2.extras.RealDictCursor'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the credentials used to connect to the database and establish a connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – The name of the database to which a connection will be established.</p></li>
<li><p><strong>host</strong> (<em>str</em>) – The hostname where the database resides.</p></li>
<li><p><strong>username</strong> (<em>str</em>) – The username used to connect to the database.</p></li>
<li><p><strong>password</strong> (<em>str</em>) – The password used to connect to the database</p></li>
<li><p><strong>cursor_factory</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">psycopg2.extras.RealDictCursor</span></code>) – The type of cursors to create.
The RealDictCursor factory is the default one.
This factory returns associative arrays (<cite>dict</cite> instances) from queries.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="connection.db_connection.PostgreSQLConnection.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection.</p>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the changes.</p>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Duplicate the connection.
This can be used to create a different session.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The new connection.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#connection.db_connection.PostgreSQLConnection" title="connection.db_connection.PostgreSQLConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">connection.db_connection.PostgreSQLConnection</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of rows when executing the given query.
The COUNT command itself has to be given.
This function only acts as a wrapper, getting just a number of rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) – The query to execute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of rows in the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.cursor">
<code class="descname">cursor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.cursor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the connection’s cursor.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A cursor for the connection.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DictCursorBase</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>batch</em>, <em>with_cursor=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given transactions. If one fails, roll back all the changes.
This function does not return anything, but it may throw exceptions.
When something does go awry, the connection establishes a new connection.</p>
<p>If the execution is supposed to return results, then the <cite>with_cursor</cite> parameter returns the used cursor.
Otherwise, the used cursor is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>list of str</em>) – A batch of queries to execute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A cursor with the results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None or <code class="xref py py-class docutils literal notranslate"><span class="pre">DictCursorBase</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code>: Any exception that is caught is rethrown.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the query returns any rows.
The query should be a <cite>select</cite> statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) – The query to execute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean indicating whether any rows were returned from the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.reconnect">
<code class="descname">reconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.reconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.reconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect to the database.</p>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch all the rows returned from the database using the given query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) – The <cite>select</cite> query to execute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All the rows returned by the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="connection.db_connection.PostgreSQLConnection.select_one">
<code class="descname">select_one</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/connection/db_connection.html#PostgreSQLConnection.select_one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connection.db_connection.PostgreSQLConnection.select_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch one row from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) – The <cite>select</cite> query to execute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A single row.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="server.html" class="btn btn-neutral float-right" title="Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coauth.html" class="btn btn-neutral float-left" title="OAuth" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Nicholas Mamo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>